おまかせウィキペディア.alfredworkflowのメモ

機能：
ウィキペディの記事をランダムに表示させる
※カスタマイズが可能です

インストール：
　1.alfredworkflowをダウンロード
　2.ファイルをダブルクリックしてワークフローに登録

使い方：
　⌃w（ホットキーはご自身で設定が必要です）


開発メモ：

1.randomユーティリティ

　おまかせ表示の乱数として利用しています
　初期の段階では0から99の乱数を発生させてロジックで表示させていましたが
　ユーティリティをキーワード（Word from list）の方式にすると
　RunScriptいらずのコードレスワークフローになりました
　randomユーティリティのサンプルとしては打って付けですね　
　当初のワークフローは青いオブジェクトとして残しています

　なお、最終的に選択肢は500個になりましたが、
　大部分は『カテゴリー内おまかせ表示』を利用しており、総ページ数は50,000ページ以上
　もちろんお好きなものにカスタマイズ可能です


2.randomの結果をフィードバックする

  単にランダムにウィキペディアのページを表示させるだけで良いのですが
　演出として選択肢をフィードバックしています
　URLエンコードもない日本語なので、そのままLarge Typeしてるだけです


3.テストドライバーを作る

　お遊びツールなので作りっぱなしで良いのですが、テストツールも作ってみました
  HOTKEYやインプットのキーワードから接続すれば、特定の表示をテストできます
  実際のところは『カテゴリー内おまかせ表示』がどの程度のランダム具合で表示されるか試したかったのです
  なんとなくですが、偏りがあるような気がしたので。。。
　オレンジのオブジェクトとして残しています


4.numbers.appを使ってソースをつくる

　500もの選択肢となるとメンテナンスが面倒なので、numbers.appで編集してみました
　エクセルのように数式がを使ってコードを生成できます（最終的にソースコードレスになりましたが）
　重複がないかどうかのチェックもできます
　randomユーティリティへの作り込みは、列選択のコピペ1発で済みますし
　同梱しておきますのでご参考まで
　因みに、カテゴリーに含まれる下位のカテゴリー数やページ数の情報もつけています（手作業ノーチェックにつき『間違い御免』です）
　下位カテゴリーが0のものみを選択肢にしたいときななどに便利かも


6.ブラウザの表示が遅いことへの対応

　このワークフローに限ったことではないのですが、ブラウザの表示がかなり遅いことがあります
　そんなときには手動でキャッシュをクリアすると、すぐにそのページが表示されたりします
　Alfredでは、キー送信を行うオブジェクト（Key Combo）があり、
　例えばSafariのキャッシュクリアのショートカットである⌥⌘Eを送信することができます
　また処理をウエイトさせるオブジェクト（delayユーティリティ）がありタイミングの調整も可能です
　（Large typeが早いと干渉してSafariへショートカットが届かないので遅延させました）
　私の環境の問題だと思いますので、フローつないでいませんが、白いオブジェクトとして残しておきました
　因みに私のデフォルトブラウザはSafariです


背景：
　ウィキペディアにおまかせ表示というツールがあることは知っていましたが
　興味のないトピックスも多く使えないツールでした
　特別ページの一覧やメインページをみていたら、カテゴリー内おまかせ表示というツールをみつけ
　これだ！と思いつくってみました
　
 ウィキペディアの世界を堪能してください
　※私の興味で選択肢を作成していまます
 　性的な表現や画像、犯罪や暴力に関するページが表示されることがあるのでご了承ください
　（もち公式なウィキペディアのページです）




